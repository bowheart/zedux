
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Store Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="ZeduxActor.html" />
    
    
    <link rel="prev" href="transition.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../overview.html">
            
                <a href="../overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../examples.html">
            
                <a href="../examples.html">
            
                    
                    Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../guides/">
            
                <a href="../guides/">
            
                    
                    Guides
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../guides/reactUsage.html">
            
                <a href="../guides/reactUsage.html">
            
                    
                    React Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../guides/theReducerLayer.html">
            
                <a href="../guides/theReducerLayer.html">
            
                    
                    The Reducer Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../guides/theProcessorLayer.html">
            
                <a href="../guides/theProcessorLayer.html">
            
                    
                    The Processor Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../guides/theInspectorLayer.html">
            
                <a href="../guides/theInspectorLayer.html">
            
                    
                    The Inspector Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../guides/zeroConfiguration.html">
            
                <a href="../guides/zeroConfiguration.html">
            
                    
                    Zero Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../guides/dispatchableReducers.html">
            
                <a href="../guides/dispatchableReducers.html">
            
                    
                    Dispatchable Reducers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../guides/harnessingStateMachines.html">
            
                <a href="../guides/harnessingStateMachines.html">
            
                    
                    Harnessing State Machines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../guides/storeComposition.html">
            
                <a href="../guides/storeComposition.html">
            
                    
                    Store Composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../guides/configuringTheHierarchy.html">
            
                <a href="../guides/configuringTheHierarchy.html">
            
                    
                    Configuring the Hierarchy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../guides/mergingHierarchies.html">
            
                <a href="../guides/mergingHierarchies.html">
            
                    
                    Merging Hierarchies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../guides/metaChains.html">
            
                <a href="../guides/metaChains.html">
            
                    
                    Meta Chains
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.12" data-path="../guides/optimizingPerformance.html">
            
                <a href="../guides/optimizingPerformance.html">
            
                    
                    Optimizing Performance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="act.html">
            
                <a href="act.html">
            
                    
                    act
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="act.namespace.html">
            
                <a href="act.namespace.html">
            
                    
                    act.namespace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="actionTypes.html">
            
                <a href="actionTypes.html">
            
                    
                    actionTypes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="createStore.html">
            
                <a href="createStore.html">
            
                    
                    createStore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="metaTypes.html">
            
                <a href="metaTypes.html">
            
                    
                    metaTypes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="react.html">
            
                <a href="react.html">
            
                    
                    react
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="select.html">
            
                <a href="select.html">
            
                    
                    select
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="state.html">
            
                <a href="state.html">
            
                    
                    state
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="transition.html">
            
                <a href="transition.html">
            
                    
                    transition
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.10" data-path="Store.html">
            
                <a href="Store.html">
            
                    
                    Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="ZeduxActor.html">
            
                <a href="ZeduxActor.html">
            
                    
                    ZeduxActor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.12" data-path="ZeduxMachine.html">
            
                <a href="ZeduxMachine.html">
            
                    
                    ZeduxMachine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.13" data-path="ZeduxReactor.html">
            
                <a href="ZeduxReactor.html">
            
                    
                    ZeduxReactor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.14" data-path="ZeduxState.html">
            
                <a href="ZeduxState.html">
            
                    
                    ZeduxState
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../types/">
            
                <a href="../types/">
            
                    
                    Types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../types/Action.html">
            
                <a href="../types/Action.html">
            
                    
                    Action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../types/ActionCreator.html">
            
                <a href="../types/ActionCreator.html">
            
                    
                    ActionCreator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../types/Actor.html">
            
                <a href="../types/Actor.html">
            
                    
                    Actor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../types/Branch.html">
            
                <a href="../types/Branch.html">
            
                    
                    Branch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../types/Dispatchable.html">
            
                <a href="../types/Dispatchable.html">
            
                    
                    Dispatchable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../types/HierarchyDescriptor.html">
            
                <a href="../types/HierarchyDescriptor.html">
            
                    
                    HierarchyDescriptor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../types/Inducer.html">
            
                <a href="../types/Inducer.html">
            
                    
                    Inducer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../types/Inspector.html">
            
                <a href="../types/Inspector.html">
            
                    
                    Inspector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../types/MetaChainNode.html">
            
                <a href="../types/MetaChainNode.html">
            
                    
                    MetaChainNode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../types/MetaNode.html">
            
                <a href="../types/MetaNode.html">
            
                    
                    MetaNode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="../types/NodeOptions.html">
            
                <a href="../types/NodeOptions.html">
            
                    
                    NodeOptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="../types/Processor.html">
            
                <a href="../types/Processor.html">
            
                    
                    Processor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="../types/Reactor.html">
            
                <a href="../types/Reactor.html">
            
                    
                    Reactor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="../types/Reducer.html">
            
                <a href="../types/Reducer.html">
            
                    
                    Reducer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.15" data-path="../types/Selector.html">
            
                <a href="../types/Selector.html">
            
                    
                    Selector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.16" data-path="../types/State.html">
            
                <a href="../types/State.html">
            
                    
                    State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.17" data-path="../types/StoreBase.html">
            
                <a href="../types/StoreBase.html">
            
                    
                    StoreBase
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.18" data-path="../types/Subscription.html">
            
                <a href="../types/Subscription.html">
            
                    
                    Subscription
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../glossary.html">
            
                <a href="../glossary.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../shapeRelationProblems.html">
            
                <a href="../shapeRelationProblems.html">
            
                    
                    Shape Relation Problems
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Store</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="store">Store</h1>
<p>A Zedux store is just a collection of functions. Conceptually, a store is a predictable state container that enforces unidirectional data flow. The store&apos;s state can only be updated by dispatching <a href="../types/Action.html">actions</a> to it.</p>
<p>Zedux stores are completely synchronous. This means that when an action is dispatched to the store, the action is immediately sent through the <a href="../guides/theReducerLayer.html">reducer layer</a>, which calculates the new state and returns it directly to the dispatch caller.</p>
<p>Zedux stores are composable. A Zedux store is a valid node in another store&apos;s <a href="../types/HierarchyDescriptor.html">hierarchy descriptor</a>.</p>
<p>Zedux stores are created with the <a href="createStore.html"><code>createStore()</code> factory</a>.</p>
<h2 id="method-api">Method API</h2>
<h3 id="storedispatch"><code>store.dispatch()</code></h3>
<p>Dispatches an <a href="../types/Action.html">action</a> to the store and returns the new state. Dispatched actions can be canceled by inspectors, but the current state (modified or not) will always be returned.</p>
<h4 id="definition">Definition</h4>
<pre class="language-"><code class="lang-typescript"><span class="token punctuation">(</span>dispatchable<span class="token punctuation">:</span> Dispatchable<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">any</span>
</code></pre>
<p><strong>dispatchable</strong> - Either an <a href="../types/Action.html">Action</a> or an <a href="../types/Inducer.html">Inducer</a>. See the <a href="../types/Dispatchable.html">Dispatchable type doc</a>.</p>
<h4 id="examples">Examples</h4>
<p>Dispatching a normal action:</p>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> action<span class="token punctuation">.</span>payload <span class="token operator">||</span> state<span class="token punctuation">)</span>

<span class="token keyword">const</span> newState <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&apos;test&apos;</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> <span class="token string">&apos;new state&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

newState <span class="token comment" spellcheck="true">// &apos;new state&apos;</span>
</code></pre>
<p>Dispatching an <a href="../types/Inducer.html">inducer</a>:</p>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> newState <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&apos;new state&apos;</span>
<span class="token punctuation">)</span>

newState <span class="token comment" spellcheck="true">// &apos;new state&apos;</span>
</code></pre>
<h3 id="storegetstate"><code>store.getState()</code></h3>
<p>Retrieves the current state of the store. <strong>Do not mutate this value</strong>.</p>
<h4 id="definition">Definition</h4>
<pre class="language-"><code class="lang-typescript"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">any</span>
</code></pre>
<h4 id="examples">Examples</h4>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">hydrate</span><span class="token punctuation">(</span><span class="token string">&apos;initial state&apos;</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// &apos;initial state&apos;</span>
</code></pre>
<h3 id="storehydrate"><code>store.hydrate()</code></h3>
<p>Hydrates the store with the given data.</p>
<p>Completely replaces any existing state tree with whatever is passed.</p>
<p>Internally, this just causes the special <a href="actionTypes.html#hydrate">hydrate</a> action to be dispatched to the store.</p>
<p>Note that this won&apos;t do any checking to make sure the new state shape is compatible with the current reducer hierarchy. That&apos;s your job.</p>
<h4 id="definition">Definition</h4>
<pre class="language-"><code class="lang-typescript"><span class="token punctuation">(</span>newState<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Store
</code></pre>
<p><strong>newState</strong> - The state to force upon the store.</p>
<p>Returns the store for chaining.</p>
<h4 id="examples">Examples</h4>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">hydrate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> weapon<span class="token punctuation">:</span> <span class="token string">&apos;dagger&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// { weapon: &apos;dagger&apos; }</span>

<span class="token comment" spellcheck="true">// Whereas `setState()` merges the partial state update into</span>
<span class="token comment" spellcheck="true">// the existing state...</span>
store<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> helmet<span class="token punctuation">:</span> <span class="token string">&apos;iron&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">/* -&gt;
  {
    weapon: &apos;dagger&apos;,
    helmet: &apos;iron&apos;
  }
*/</span>

<span class="token comment" spellcheck="true">// ...`hydrate()` replaces the state tree entirely:</span>
store<span class="token punctuation">.</span><span class="token function">hydrate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> helmet<span class="token punctuation">:</span> <span class="token string">&apos;bronze&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// { helmet: &apos;bronze&apos; }</span>
</code></pre>
<h3 id="storeinspect"><code>store.inspect()</code></h3>
<p>Registers a new <a href="../types/Inspector.html">inspector</a>. Unlike subscribers, inspectors are expected to stick around for the store&apos;s entire life. As such, there is currently no way to unregister an inspector. But if you find a use case for that, we&apos;d be happy to hear it!</p>
<h4 id="definition">Definition</h4>
<pre class="language-"><code class="lang-typescript"><span class="token punctuation">(</span>inspector<span class="token punctuation">:</span> Inspector<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Inspection
</code></pre>
<p><strong>inspector</strong> - The <a href="../types/Inspector.html">inspector</a> to register with the store.</p>
<p>Returns an <a href="../types/Inspection.md">Inspection</a>. The inspection&apos;s <code>uninspect()</code> method can be used to unregister the inspector from the store.</p>
<h4 id="examples">Examples</h4>
<p>A simple logger:</p>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> inspection <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">inspect</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">logger</span><span class="token punctuation">(</span>storeBase<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;action received:&apos;</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&apos;useAntidote&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// action received: { type: &apos;useAntidote&apos; }</span>

inspection<span class="token punctuation">.</span><span class="token function">uninspect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="storesetnodeoptions"><code>store.setNodeOptions()</code></h3>
<p>Sets the <a href="../types/NodeOptions.html">node options</a> that the intermediate nodes in the reducer hierarchy will use to output the state tree.</p>
<h4 id="definition">Definition</h4>
<pre class="language-"><code class="lang-typescript"><span class="token punctuation">(</span>options<span class="token punctuation">:</span> NodeOptions<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Store
</code></pre>
<p><strong>options</strong> - A hash of <a href="../types/NodeOptions.html">node options</a> that teach Zedux how to use the new data type.</p>
<p>Returns the store for chaining.</p>
<h4 id="examples">Examples</h4>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Map <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;immutable&apos;</span>

<span class="token keyword">const</span> nodeOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  clone<span class="token punctuation">:</span> node <span class="token operator">=</span><span class="token operator">&gt;</span> node<span class="token punctuation">,</span>
  create<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>node<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> node<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>node<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> node<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setNodeOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
</code></pre>
<h3 id="storesetstate"><code>store.setState()</code></h3>
<p>Applies a partial state update to the store. The partial state tree will be merged into the existing state tree (immutably, of course).</p>
<p>Will also trigger the special <a href="actionTypes.html#partialhydrate">PARTIAL_HYDRATE</a> action which the store&apos;s inspectors can plug in to in order to implement time travel debugging, etc.</p>
<p>This is the king of the zero-configuration model of Zedux. Very small apps may want to use this method often and will find extreme joy in its ease of use. Large apps may want to avoid it entirely, sticking to a more pure, Redux-y approach. But that&apos;s entirely up to you. You&apos;re welcome.</p>
<h4 id="definition">Definition</h4>
<pre class="language-"><code class="lang-typescript"><span class="token punctuation">(</span>partialUpdate<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> S
</code></pre>
<p><strong>partialUpdate</strong> - The partial state update to merge into the existing state. Does not have to clone the root node or any nested nodes in the state tree. Zedux takes care of that.</p>
<p>Returns the new state of the store.</p>
<h4 id="examples">Examples</h4>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">hydrate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    equipment<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      helmet<span class="token punctuation">:</span> <span class="token string">&apos;iron helm&apos;</span><span class="token punctuation">,</span>
      weapon<span class="token punctuation">:</span> <span class="token string">&apos;broadsword&apos;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    health<span class="token punctuation">:</span> <span class="token number">22</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> newState <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  equipment<span class="token punctuation">:</span> <span class="token punctuation">{</span> weapon<span class="token punctuation">:</span> <span class="token string">&apos;crossbow&apos;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

newState <span class="token comment" spellcheck="true">/* -&gt;
  {
    equipment: {
      helmet: &apos;iron helm&apos;,
      weapon: &apos;crossbow&apos;
    },
    health: 22
  }
*/</span>
</code></pre>
<p>Notice that <code>store.hydrate()</code> returns the store for chaining, while <code>store.setState()</code> returns the new state of the tree. This illustrates the different use cases &#x2013; <code>store.hydrate()</code> is for setting the initial state of the store or fully wiping/recreating it. <code>store.setState()</code> is for on-the-fly state updates.</p>
<h3 id="storesubscribe"><code>store.subscribe()</code></h3>
<p>Registers a subscriber with the store. The subscriber will be notified when the store&apos;s state changes.</p>
<h4 id="definition">Definition</h4>
<pre class="language-"><code class="lang-typescript"><span class="token punctuation">(</span>subscriber<span class="token punctuation">:</span> Subscriber<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Subscription
</code></pre>
<p><strong>subscriber</strong> - A <a href="../types/Subscriber">subscriber function</a> that will be passed <code>newState</code> and <code>oldState</code> when the state changes.</p>
<p>Returns a <a href="../types/Subscription.html">subscription</a>. The subscription&apos;s <code>unsubscribe()</code> method can be used to unregister the subscriber from the store.</p>
<h4 id="examples">Examples</h4>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> subscription <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>newState<span class="token punctuation">,</span> oldState<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`state changed from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldState<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newState<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&apos;new state&apos;</span>
<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// state changed from undefined to new state</span>

subscription<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="storeuse"><code>store.use()</code></h3>
<p>The code splitting wizard of the Zedux realm. Creates or modifies the <a href="../types/Reactor.html">reactor hierarchy</a> using the <a href="#storesetnodeoptions">configured node options</a> and the passed <a href="../types/HierarchyDescriptor.html">hierarchy descriptor</a>.</p>
<p>After the reactor hierarchy has been modified, it dispatches a special recalculate action to the store.</p>
<h4 id="definition">Definition</h4>
<pre class="language-"><code class="lang-typescript"><span class="token punctuation">(</span>newHierarchy<span class="token punctuation">:</span> HierarchyDescriptor<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Store
</code></pre>
<p><strong>newHierarchy</strong> - The new <a href="../types/HierarchyDescriptor">hierarchy descriptor</a>. Will be recursively merged into the existing hierarchy (assuming both the old and new hierarchies are <a href="../types/Branch.html">branch nodes</a>) or create it if it doesn&apos;t exist.</p>
<h4 id="examples">Examples</h4>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    cart<span class="token punctuation">:</span> cartStore<span class="token punctuation">,</span>
    entities<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      apparel<span class="token punctuation">:</span> apparelReactor<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Oh! They went to the &quot;toys&quot; page of our SPA.</span>
<span class="token comment" spellcheck="true">// Load up the &quot;toys&quot; reducer and add it to the store.</span>
store<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  entities<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    toys<span class="token punctuation">:</span> toysReducer <span class="token comment" spellcheck="true">// yeah, a normal reducer for fun.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>This will give us a hierarchy that looks like:</p>
<pre class="language-"><code class="lang-javascript"><span class="token punctuation">{</span>
  cart<span class="token punctuation">:</span> cartStore<span class="token punctuation">,</span>
  entities<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    apparel<span class="token punctuation">:</span> apparelReactor<span class="token punctuation">,</span>
    toys<span class="token punctuation">:</span> toysReducer
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Note that while Zedux provides this abstraction for you, you can still piece together your own reactor hierarchies like in Redux. Just pass your root reactor to <code>store.use()</code>.</p>
<p>See the <a href="../guides/mergingHierarchies.html">merging hierarchies</a> guide for a more in-depth rundown.</p>
<h2 id="notes">Notes</h2>
<p>A Zedux store also contains two special symbols:</p>
<ul>
<li><code>$$observable</code> - Makes the Zedux store compliant with the <a href="https://github.com/tc39/proposal-observable" target="_blank">proposed observable spec</a>. Yes, this means you can do crazy stuff:</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;rxjs&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;zedux&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> state$ <span class="token operator">=</span> Observable<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">&gt;</span> state <span class="token operator">!==</span> <span class="token string">&apos;a&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>newState <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;the state is not &quot;a&quot;! It is:&apos;</span><span class="token punctuation">,</span> newState<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&apos;a&apos;</span><span class="token punctuation">)</span>
store<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&apos;b&apos;</span><span class="token punctuation">)</span>
store<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&apos;a&apos;</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// the state is not &quot;a&quot;! It is: &apos;b&apos;</span>
</code></pre>
<ul>
<li><code>$$typeof</code> - Identifies the store internally. This is mostly just important when passing a store as part of a <a href="../types/HierarchyDescriptor.html">hierarchy descriptor</a>. Zedux won&apos;t recognize the store without this property.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="transition.html" class="navigation navigation-prev " aria-label="Previous page: transition">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="ZeduxActor.html" class="navigation navigation-next " aria-label="Next page: ZeduxActor">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Store","level":"1.5.10","depth":2,"next":{"title":"ZeduxActor","level":"1.5.11","depth":2,"path":"docs/api/ZeduxActor.md","ref":"docs/api/ZeduxActor.md","articles":[]},"previous":{"title":"transition","level":"1.5.9","depth":2,"path":"docs/api/transition.md","ref":"docs/api/transition.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["-highlight","prism","anchorjs"],"pluginsConfig":{"prism":{},"anchorjs":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"./docs/styles/website.css"}},"file":{"path":"docs/api/Store.md","mtime":"2018-04-20T23:10:00.995Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-04-21T20:42:33.166Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

